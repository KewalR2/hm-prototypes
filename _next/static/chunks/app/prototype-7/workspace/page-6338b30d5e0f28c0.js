(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4129],{2870:(e,t,a)=>{Promise.resolve().then(a.bind(a,5791))},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},5791:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(5155),s=a(2115),d=a(5695);let n=[{id:"user1",name:"John Smith",avatar:"\uD83D\uDC68‍\uD83D\uDCBC",role:"admin",department:"Project Management"},{id:"user2",name:"Sarah Johnson",avatar:"\uD83D\uDC69‍\uD83D\uDCBC",role:"editor",department:"Procurement"},{id:"user3",name:"Michael Chen",avatar:"\uD83D\uDC68‍\uD83D\uDCBB",role:"editor",department:"Estimating"},{id:"user4",name:"Jessica Lee",avatar:"\uD83D\uDC69‍\uD83D\uDD27",role:"viewer",department:"Engineering"},{id:"user5",name:"Robert Taylor",avatar:"\uD83D\uDC68‍\uD83C\uDFEB",role:"viewer",department:"Finance"}],i=[{id:"mat1",name:"Concrete Mix - High Strength",description:"Premium high-strength concrete mix suitable for structural applications",unit:"cubic yard",quantity:250,unitPrice:125,status:"approved",lastEditedBy:"user3",comments:[{id:"com1",userId:"user2",content:"Should we consider the standard mix to reduce costs?",timestamp:Date.now()-864e5,resolved:!0},{id:"com2",userId:"user3",content:"The high-strength mix is required for the foundation per engineering specs.",timestamp:Date.now()-828e5,resolved:!0}]},{id:"mat2",name:"Rebar #4",description:'Standard #4 rebar (0.5" diameter) for concrete reinforcement',unit:"ton",quantity:18,unitPrice:980,status:"approved",lastEditedBy:"user2",comments:[]},{id:"mat3",name:"Geotextile Fabric",description:"Non-woven geotextile fabric for ground stabilization",unit:"sq. ft.",quantity:12e3,unitPrice:.45,status:"discussion",lastEditedBy:"user2",comments:[{id:"com3",userId:"user1",content:"Can we get a sample of this material to confirm compatibility with our site conditions?",timestamp:Date.now()-18e5,resolved:!1}]},{id:"mat4",name:"Structural Steel I-Beams",description:"W12x26 structural steel I-beams for mezzanine construction",unit:"linear ft.",quantity:450,unitPrice:42,status:"pending",lastEditedBy:"user3",comments:[{id:"com4",userId:"user4",content:"The engineering specs call for W12x30. Should we adjust?",timestamp:Date.now()-6e5,resolved:!1}]},{id:"mat5",name:'Gravel - 3/4" Crushed Stone',description:'Clean 3/4" crushed stone aggregate for base preparation',unit:"ton",quantity:180,unitPrice:38,status:"approved",lastEditedBy:"user1",comments:[]}],o=[{id:"act1",userId:"user1",action:"created",target:"quote",timestamp:Date.now()-1728e5},{id:"act2",userId:"user2",action:"added",target:"Concrete Mix - High Strength",timestamp:Date.now()-1692e5},{id:"act3",userId:"user3",action:"updated",target:"Concrete Mix - High Strength",timestamp:Date.now()-1656e5},{id:"act4",userId:"user2",action:"commented on",target:"Concrete Mix - High Strength",timestamp:Date.now()-864e5},{id:"act5",userId:"user3",action:"replied to comment on",target:"Concrete Mix - High Strength",timestamp:Date.now()-828e5},{id:"act6",userId:"user1",action:"approved",target:"Concrete Mix - High Strength",timestamp:Date.now()-792e5},{id:"act7",userId:"user2",action:"added",target:"Rebar #4",timestamp:Date.now()-72e6},{id:"act8",userId:"user1",action:"approved",target:"Rebar #4",timestamp:Date.now()-684e5},{id:"act9",userId:"user2",action:"added",target:"Geotextile Fabric",timestamp:Date.now()-36e6},{id:"act10",userId:"user1",action:"commented on",target:"Geotextile Fabric",timestamp:Date.now()-18e5},{id:"act11",userId:"user3",action:"added",target:"Structural Steel I-Beams",timestamp:Date.now()-12e5},{id:"act12",userId:"user4",action:"commented on",target:"Structural Steel I-Beams",timestamp:Date.now()-6e5},{id:"act13",userId:"user1",action:"added",target:'Gravel - 3/4" Crushed Stone',timestamp:Date.now()-3e5},{id:"act14",userId:"user1",action:"approved",target:'Gravel - 3/4" Crushed Stone',timestamp:Date.now()-24e4}],l=[{id:"msg1",userId:"user1",content:"Welcome to the workspace! I've started the quote for the Main Street project.",timestamp:Date.now()-1728e5},{id:"msg2",userId:"user2",content:"Great, I'll start adding the concrete and rebar materials.",timestamp:Date.now()-1692e5},{id:"msg3",userId:"user3",content:"I'll review the engineering specs and make sure we have the right quantities.",timestamp:Date.now()-1656e5},{id:"msg4",userId:"user1",content:"Just approved the concrete and rebar. Let's move on to site prep materials.",timestamp:Date.now()-792e5},{id:"msg5",userId:"user4",content:"I noticed we might need to adjust the I-beam specs based on the revised drawings.",timestamp:Date.now()-18e6},{id:"msg6",userId:"user3",content:"Good catch Jessica! I'll take a look at that right away.",timestamp:Date.now()-1728e4}];function c(){let e=(0,d.useRouter)(),[t,a]=(0,s.useState)(n[0]),[c,m]=(0,s.useState)(i),[u,x]=(0,s.useState)(l),[g,p]=(0,s.useState)(o),[h,b]=(0,s.useState)("materials"),[y,v]=(0,s.useState)(null),[j,f]=(0,s.useState)(""),[N,k]=(0,s.useState)({materialId:"",content:""}),[w,I]=(0,s.useState)(!1),[C,D]=(0,s.useState)({name:"",description:"",unit:"",quantity:0,unitPrice:0}),S=(0,s.useRef)(null);(0,s.useEffect)(()=>{"chat"===h&&S.current&&S.current.scrollIntoView({behavior:"smooth"})},[u,h]),(0,s.useEffect)(()=>{let e=sessionStorage.getItem("collaborativeWorkspace");if(e){let t=JSON.parse(e);m(t.materials||i),x(t.messages||l),p(t.activities||o)}},[]);let P=()=>{sessionStorage.setItem("collaborativeWorkspace",JSON.stringify({materials:c,messages:u,activities:g}))};(0,s.useEffect)(()=>{P()},[c,u,g]);let q=e=>n.find(t=>t.id===e)||n[0],M=e=>{let t=n.find(t=>t.id===e);if(t){a(t);let e={id:"act".concat(g.length+1),userId:t.id,action:"joined",target:"workspace",timestamp:Date.now()};p([...g,e])}},E=e=>{v(e)},B=()=>{if(y){m(c.map(e=>e.id===y.id?{...y,lastEditedBy:t.id}:e));let e={id:"act".concat(g.length+1),userId:t.id,action:"updated",target:y.name,timestamp:Date.now()};p([...g,e]),v(null)}},R=()=>{v(null)},A=(e,a)=>{let r=c.map(r=>r.id===e?{...r,status:a,lastEditedBy:t.id}:r),s=c.find(t=>t.id===e);if(s){let e={id:"act".concat(g.length+1),userId:t.id,action:"approved"===a?"approved":"rejected"===a?"rejected":"moved to discussion",target:s.name,timestamp:Date.now()};p([...g,e])}m(r)},T=e=>{if(""===N.content.trim())return;let a=c.map(a=>{if(a.id===e){let e={id:"com".concat(Date.now()),userId:t.id,content:N.content,timestamp:Date.now(),resolved:!1};return{...a,comments:[...a.comments,e],status:"discussion"}}return a}),r=c.find(t=>t.id===e);if(r){let e={id:"act".concat(g.length+1),userId:t.id,action:"commented on",target:r.name,timestamp:Date.now()};p([...g,e])}m(a),k({materialId:"",content:""})},F=(e,a)=>{let r=c.map(t=>{if(t.id===e){let e=t.comments.map(e=>e.id===a?{...e,resolved:!0}:e),r=e.every(e=>e.resolved);return{...t,comments:e,status:r?"pending":"discussion"}}return t}),s=c.find(t=>t.id===e);if(s){let e={id:"act".concat(g.length+1),userId:t.id,action:"resolved comment on",target:s.name,timestamp:Date.now()};p([...g,e])}m(r)},G=()=>{if(""===j.trim())return;x([...u,{id:"msg".concat(Date.now()),userId:t.id,content:j,timestamp:Date.now()}]),f("");let e={id:"act".concat(g.length+1),userId:t.id,action:"sent message in",target:"chat",timestamp:Date.now()};p([...g,e])},J=e=>new Date(e).toLocaleString(),L=e=>{let t=new Date,a=new Date(e),r=Math.floor(Math.floor((t.getTime()-a.getTime())/1e3)/60),s=Math.floor(r/60),d=Math.floor(s/24);return d>0?"".concat(d,"d ago"):s>0?"".concat(s,"h ago"):r>0?"".concat(r,"m ago"):"Just now"},W=()=>"admin"===t.role||"editor"===t.role,Q=()=>"admin"===t.role;return(0,r.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8 bg-white dark:bg-gray-900 rounded-xl shadow-sm p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Main Street Construction Project"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Collaborative Quote Workspace"})]}),(0,r.jsx)("div",{className:"mt-4 md:mt-0",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:"Working as:"}),(0,r.jsx)("select",{value:t.id,onChange:e=>M(e.target.value),className:"p-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800",children:n.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.avatar," ",e.name," (",e.role,")"]},e.id))})]})})]}),(0,r.jsxs)("div",{className:"mt-6 flex flex-wrap gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center px-3 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 rounded-md",children:[(0,r.jsx)("span",{className:"font-medium mr-2",children:"Quote Status:"}),(0,r.jsx)("span",{children:"In Progress"})]}),(0,r.jsxs)("div",{className:"flex items-center px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 rounded-md",children:[(0,r.jsx)("span",{className:"font-medium mr-2",children:"Total:"}),(0,r.jsxs)("span",{children:["$",c.reduce((e,t)=>e+t.quantity*t.unitPrice,0).toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex items-center px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 rounded-md",children:[(0,r.jsx)("span",{className:"font-medium mr-2",children:"Approved:"}),(0,r.jsx)("span",{children:c.filter(e=>"approved"===e.status).length})]}),(0,r.jsxs)("div",{className:"flex items-center px-3 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 rounded-md",children:[(0,r.jsx)("span",{className:"font-medium mr-2",children:"Pending:"}),(0,r.jsx)("span",{children:c.filter(e=>"pending"===e.status).length})]}),(0,r.jsxs)("div",{className:"flex items-center px-3 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300 rounded-md",children:[(0,r.jsx)("span",{className:"font-medium mr-2",children:"In Discussion:"}),(0,r.jsx)("span",{children:c.filter(e=>"discussion"===e.status).length})]})]})]}),(0,r.jsxs)("div",{className:"flex border-b border-gray-200 dark:border-gray-700 mb-6",children:[(0,r.jsx)("button",{className:"py-2 px-4 font-medium ".concat("materials"===h?"text-primary border-b-2 border-primary":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),onClick:()=>b("materials"),children:"Materials"}),(0,r.jsx)("button",{className:"py-2 px-4 font-medium ".concat("chat"===h?"text-primary border-b-2 border-primary":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),onClick:()=>b("chat"),children:"Team Chat"}),(0,r.jsx)("button",{className:"py-2 px-4 font-medium ".concat("activity"===h?"text-primary border-b-2 border-primary":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),onClick:()=>b("activity"),children:"Activity Log"})]}),"materials"===h&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-sm overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Materials List"}),W()&&(0,r.jsx)("button",{onClick:()=>I(!0),className:"bg-primary hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-md transition-colors",children:"Add Material"})]}),w&&(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Add New Material"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),(0,r.jsx)("input",{type:"text",value:C.name,onChange:e=>D({...C,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),(0,r.jsx)("input",{type:"text",value:C.description,onChange:e=>D({...C,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Unit"}),(0,r.jsx)("input",{type:"text",value:C.unit,onChange:e=>D({...C,unit:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Quantity"}),(0,r.jsx)("input",{type:"number",value:C.quantity||"",onChange:e=>D({...C,quantity:Number(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Unit Price ($)"}),(0,r.jsx)("input",{type:"number",value:C.unitPrice||"",onChange:e=>D({...C,unitPrice:Number(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>I(!1),className:"border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 font-medium py-2 px-4 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{if(!C.name||!C.unit||!C.quantity||!C.unitPrice)return;let e={id:"mat".concat(Date.now()),name:C.name,description:C.description||"",unit:C.unit,quantity:C.quantity,unitPrice:C.unitPrice,status:"pending",lastEditedBy:t.id,comments:[]};m([...c,e]);let a={id:"act".concat(g.length+1),userId:t.id,action:"added",target:e.name,timestamp:Date.now()};p([...g,a]),D({name:"",description:"",unit:"",quantity:0,unitPrice:0}),I(!1)},className:"bg-primary hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-md",children:"Add Material"})]})]}),(0,r.jsxs)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[c.map(e=>(0,r.jsx)("div",{className:"p-6",children:y&&y.id===e.id?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),(0,r.jsx)("input",{type:"text",value:y.name,onChange:e=>v({...y,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),(0,r.jsx)("input",{type:"text",value:y.description,onChange:e=>v({...y,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Unit"}),(0,r.jsx)("input",{type:"text",value:y.unit,onChange:e=>v({...y,unit:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Quantity"}),(0,r.jsx)("input",{type:"number",value:y.quantity,onChange:e=>v({...y,quantity:Number(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Unit Price ($)"}),(0,r.jsx)("input",{type:"number",value:y.unitPrice,onChange:e=>v({...y,unitPrice:Number(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:R,className:"border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 font-medium py-2 px-4 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",children:"Cancel"}),(0,r.jsx)("button",{onClick:B,className:"bg-primary hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-md",children:"Save Changes"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between",children:[(0,r.jsxs)("div",{className:"mb-4 md:mb-0",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)("h3",{className:"text-lg font-bold mr-3",children:e.name}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("approved"===e.status?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":"rejected"===e.status?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300":"discussion"===e.status?"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-2",children:e.description}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:"Quantity:"})," ",e.quantity," ",e.unit]}),(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:"Unit Price:"})," $",e.unitPrice.toFixed(2)]}),(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:"Total:"})," $",(e.quantity*e.unitPrice).toFixed(2)]})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Last edited by ",q(e.lastEditedBy).name]})]}),(W()||Q())&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[W()&&(0,r.jsx)("button",{onClick:()=>E(e),className:"border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 px-3 py-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-sm",children:"Edit"}),Q()&&"approved"!==e.status&&(0,r.jsx)("button",{onClick:()=>A(e.id,"approved"),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded-md text-sm",children:"Approve"}),Q()&&"rejected"!==e.status&&(0,r.jsx)("button",{onClick:()=>A(e.id,"rejected"),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-md text-sm",children:"Reject"}),W()&&"discussion"!==e.status&&(0,r.jsx)("button",{onClick:()=>A(e.id,"discussion"),className:"bg-orange-600 hover:bg-orange-700 text-white px-3 py-1 rounded-md text-sm",children:"Move to Discussion"})]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("h4",{className:"font-medium mb-2",children:"Comments"}),0===e.comments.length?(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm italic",children:"No comments yet."}):(0,r.jsx)("div",{className:"space-y-3",children:e.comments.map(t=>(0,r.jsxs)("div",{className:"p-3 rounded-lg ".concat(t.resolved?"bg-gray-100 dark:bg-gray-800/50":"bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800"),children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("span",{className:"font-medium mr-2",children:[q(t.userId).avatar," ",q(t.userId).name]}),(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:L(t.timestamp)})]}),!t.resolved&&(0,r.jsx)("button",{onClick:()=>F(e.id,t.id),className:"text-xs text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300",children:"Resolve"})]}),(0,r.jsx)("p",{className:"mt-1 ".concat(t.resolved?"text-gray-500 dark:text-gray-400":"text-gray-700 dark:text-gray-200"),children:t.content}),t.resolved&&(0,r.jsx)("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"Resolved"})]},t.id))}),(0,r.jsxs)("div",{className:"mt-3 flex",children:[(0,r.jsx)("input",{type:"text",placeholder:"Add a comment...",value:N.materialId===e.id?N.content:"",onChange:t=>k({materialId:e.id,content:t.target.value}),onFocus:()=>k({materialId:e.id,content:N.materialId===e.id?N.content:""}),className:"flex-1 border border-gray-300 dark:border-gray-700 rounded-l-md px-3 py-2"}),(0,r.jsx)("button",{onClick:()=>T(e.id),className:"bg-primary hover:bg-blue-600 text-white px-4 py-2 rounded-r-md",children:"Comment"})]})]})]})},e.id)),0===c.length&&(0,r.jsx)("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:(0,r.jsx)("p",{children:'No materials added yet. Click "Add Material" to get started.'})})]})]}),"chat"===h&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-sm overflow-hidden flex flex-col h-[600px]",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Team Chat"})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:0===u.length?(0,r.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No messages yet. Start the conversation!"})}):(0,r.jsxs)("div",{className:"space-y-4",children:[u.map(e=>{let a=q(e.userId),s=a.id===t.id;return(0,r.jsx)("div",{className:"flex ".concat(s?"justify-end":"justify-start"),children:(0,r.jsxs)("div",{className:"max-w-[80%] rounded-lg p-3 ".concat(s?"bg-primary text-white rounded-tr-none":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded-tl-none"),children:[(0,r.jsxs)("div",{className:"flex items-center mb-1",children:[(0,r.jsxs)("span",{className:"font-medium text-sm",children:[a.avatar," ",a.name]}),(0,r.jsx)("span",{className:"ml-2 text-xs ".concat(s?"text-blue-100":"text-gray-500 dark:text-gray-400"),children:L(e.timestamp)})]}),(0,r.jsx)("p",{children:e.content})]})},e.id)}),(0,r.jsx)("div",{ref:S})]})}),(0,r.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("input",{type:"text",placeholder:"Type a message...",value:j,onChange:e=>f(e.target.value),onKeyPress:e=>"Enter"===e.key&&G(),className:"flex-1 border border-gray-300 dark:border-gray-700 rounded-l-md px-3 py-2"}),(0,r.jsx)("button",{onClick:G,className:"bg-primary hover:bg-blue-600 text-white px-4 py-2 rounded-r-md",children:"Send"})]})})]}),"activity"===h&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-sm overflow-hidden",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Activity Log"})}),(0,r.jsx)("div",{className:"p-4",children:0===g.length?(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-center py-6",children:"No activity recorded yet."}):(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute left-5 top-0 bottom-0 w-0.5 bg-gray-200 dark:bg-gray-700"}),(0,r.jsx)("div",{className:"space-y-4",children:[...g].reverse().map(e=>{let t=q(e.userId);return(0,r.jsxs)("div",{className:"relative flex items-start pl-8",children:[(0,r.jsx)("div",{className:"absolute left-0 mt-1.5 w-2.5 h-2.5 rounded-full bg-primary"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("span",{className:"font-medium",children:[t.avatar," ",t.name]}),(0,r.jsx)("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-400",children:J(e.timestamp)})]}),(0,r.jsxs)("p",{className:"text-gray-700 dark:text-gray-200",children:[e.action," ",e.target]})]})]},e.id)})})]})})]}),(0,r.jsxs)("div",{className:"mt-8 flex flex-wrap gap-4 justify-end",children:[(0,r.jsx)("button",{onClick:()=>{e.push("/prototype-7")},className:"border border-gray-300 dark:border-gray-700 hover:border-primary hover:text-primary font-semibold py-2 px-6 rounded-lg transition-colors",children:"Exit Workspace"}),(0,r.jsx)("button",{onClick:()=>{alert("Quote has been saved! In a real application, this would finalize and submit the quote for customer review.")},className:"bg-primary hover:bg-blue-600 text-white font-semibold py-2 px-6 rounded-lg transition-colors",children:"Finalize Quote"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1684,7358],()=>t(2870)),_N_E=e.O()}]);